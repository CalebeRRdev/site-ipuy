/* src/components/ReloadReveal.module.css */

/* =========================================
   Boot overlay (ReloadReveal) — glass + pill chapada (1x sincronizada)
   ========================================= */

   :global(.boot) {
    position: fixed;
    inset: 0;
    z-index: 9999;
    pointer-events: none;
  
    display: grid;
    place-items: center;
  
    background: color-mix(in srgb, var(--bg) 62%, transparent);
    backdrop-filter: blur(18px) saturate(1.18);
    -webkit-backdrop-filter: blur(18px) saturate(1.18);
  
    isolation: isolate;
  
    opacity: 1;
    transform: translateY(0);
    transition: opacity 520ms cubic-bezier(0.12, 1, 0.18, 1),
      transform 520ms cubic-bezier(0.12, 1, 0.18, 1);
  
    /* ✅ duração padrão (normal) — sincroniza com HOLD_MS = 520 */
    --pill-dur: 520ms;
  }
  
  :global(.boot--out) {
    opacity: 0;
    transform: translateY(-8px);
  }
  
  /* textura bem sutil */
  :global(.boot)::before {
    content: "";
    position: absolute;
    inset: -25%;
    z-index: -1;
    pointer-events: none;
  
    background: radial-gradient(
        560px 420px at 18% 18%,
        color-mix(in srgb, var(--primary) 14%, transparent),
        transparent 62%
      ),
      radial-gradient(
        520px 380px at 82% 22%,
        rgba(120, 160, 255, 0.12),
        transparent 60%
      ),
      radial-gradient(
        640px 520px at 40% 90%,
        rgba(0, 0, 0, 0.06),
        transparent 60%
      );
    filter: blur(14px);
    opacity: 0.9;
  
    animation: bootAmbient 3.2s ease-in-out infinite;
  }
  
  @keyframes bootAmbient {
    0% {
      transform: translate3d(0, 0, 0) scale(1);
    }
    50% {
      transform: translate3d(0, -10px, 0) scale(1.02);
    }
    100% {
      transform: translate3d(0, 0, 0) scale(1);
    }
  }
  
  /* painel (mais alto e mais “glass”) */
  :global(.boot__panel) {
    width: min(560px, 92vw);
    border-radius: 26px;
    padding: 32px 24px;
  
    background: linear-gradient(
        to bottom,
        rgba(255, 255, 255, 0.52),
        rgba(255, 255, 255, 0.14)
      ),
      color-mix(in srgb, var(--cardSolid) 48%, transparent);
  
    border: 1px solid color-mix(in srgb, var(--border) 50%, transparent);
  
    box-shadow: 0 22px 70px rgba(0, 0, 0, 0.14),
      inset 0 1px 0 rgba(255, 255, 255, 0.4);
  
    backdrop-filter: blur(28px) saturate(1.35);
    -webkit-backdrop-filter: blur(28px) saturate(1.35);
  
    position: relative;
    overflow: hidden;
  }
  
  :global(.boot__panel)::before {
    content: "";
    position: absolute;
    inset: -45% -35% auto -35%;
    height: 200%;
    pointer-events: none;
  
    background: radial-gradient(
      closest-side at 35% 16%,
      rgba(255, 255, 255, 0.42),
      transparent 62%
    );
  
    opacity: 0.55;
    transform: rotate(-10deg);
  }
  
  :global(.dark) :global(.boot__panel) {
    background: linear-gradient(
        to bottom,
        rgba(255, 255, 255, 0.14),
        rgba(255, 255, 255, 0.06)
      ),
      color-mix(in srgb, var(--cardSolid) 48%, transparent);
  
    box-shadow: 0 26px 82px rgba(0, 0, 0, 0.42),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }
  
  /* organização interna */
  :global(.boot__mark) {
    display: grid;
    gap: 14px;
    justify-items: center;
    text-align: center;
    width: 100%;
  }
  
  :global(.boot__hint) {
    font-size: 12px;
    color: var(--muted);
    font-weight: 800;
    letter-spacing: -0.01em;
    text-align: center;
    width: 100%;
  }
  
  /* =========================================
     Barra + pill (vai 1x e chega no final)
     ========================================= */
  
  :global(.boot__bar) {
    --track-h: 6px;
    --pad: 3px;
  
    --pill-w: 54px;
    --pill-h: 4px;
  
    height: var(--track-h);
    width: min(520px, 78vw);
    border-radius: 999px;
  
    position: relative;
    overflow: hidden;
    box-sizing: border-box;
  
    background: color-mix(in srgb, var(--bg) 60%, transparent);
    border: 1px solid color-mix(in srgb, var(--border) 62%, transparent);
  
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),
      0 10px 22px rgba(0, 0, 0, 0.1);
  
    container-type: inline-size; /* pro 100cqw */
  
    --end-fix: 2px; /* 1px a 3px (2px costuma ser perfeito) */
  }
  
  /* pill chapada (#1374d3) */
  :global(.boot__pill) {
    position: absolute;
    top: 50%;
  
    /* ✅ em vez de left */
    inset-inline-start: var(--pad);
  
    width: var(--pill-w);
    height: var(--pill-h);
    border-radius: 999px;
    background: #1374d3;
  
    box-shadow: none;
    filter: none;
  
    transform: translate3d(0, -50%, 0);
    will-change: transform;
  
    animation: none;
  }
  
  /* ✅ só anima quando data-run="1" */
  :global(.boot)[data-run="1"] :global(.boot__pill) {
    animation: bootPill var(--pill-dur) cubic-bezier(0.16, 1, 0.3, 1) 1 both;
  }
  
  @keyframes bootPill {
    from {
      transform: translate3d(0, -50%, 0);
    }
    to {
      transform: translate3d(
        calc(100cqw - (var(--pad) * 2) - var(--pill-w) + var(--end-fix)),
        -50%,
        0
      );
    }
  }
  
  @supports not (width: 1cqw) {
    @keyframes bootPill {
      from {
        transform: translate3d(0, -50%, 0);
      }
      to {
        transform: translate3d(
          calc(100% - (var(--pad) * 2) - var(--pill-w) + var(--end-fix)),
          -50%,
          0
        );
      }
    }
  }
  
  /* reduce motion */
  @media (prefers-reduced-motion: reduce) {
    :global(.boot)::before {
      animation: none !important;
    }
    :global(.boot) {
      transition: none !important;
    }
    :global(.boot__pill) {
      animation: none !important;
    }
  }